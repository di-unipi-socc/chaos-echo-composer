# Application topology taken from Sock Shop (https://github.com/microservices-demo)

services:
  # FRONTEND
  edgeRouter:
    ports:
      - "8080"
    depends_on:
      - frontend
  frontend: 
    depends_on: 
      - orders
      - catalogue
      - users
      - carts
  
  # ORDERS
  orders:
    depends_on:
      - users
      - carts
      - payment
      - shipping
      - ordersDb
  ordersDb:

  # CATALOGUE
  catalogue:
    depends_on:
      - catalogueDb
  catalogueDb:

  # USERS
  users:
    depends_on:
      - usersDb
  usersDb:

  # CARTS
  carts:
    depends_on:
      - cartsDb
  cartsDb:

  # PAYMENT:
  payment:
  
  #Â SHIPPING
  shipping:
    depends_on:
      - rabbitMq
  rabbitMq:
  queueMaster:
    ports:
      - "8081"
    depends_on:
      - rabbitMq